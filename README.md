# Poplar Android Flash Tool Docker Image

## Instructions

1. Download

```
git clone git@github.com:pierrchen/pad.git ~/poplar_flash_docker
cd poplar_flash_docker
```

2. Build Docker image

```
sudo docker build -t binc/pad .
```

3. Run the flash tool in the Docker

A little bit setup first, telling the tool where to look for Android images and where to put the generated artifacts.

```
export POPLAR_FLASH_IN=~/poplar_android/out/target/product/poplar
export POPLAR_FLASH_OUT=~/poplar_flash_docker/flash_output
mkdir flash_output      # used for putting the output generated by the flash tool 
```

To generate artifacts for all Android partitions, simply run `./pad`, or for a single partition, say system, use `./pad -p system`.

3. Install to a usb disk and flash

copy all the stuffs in `~/poplar_flash_docker/flash_output` to a USB disk and following the instructions here to flash.

For example, to flash system partition, use: 

```
usb reset
fatload usb 0:1 ${scriptaddr} flash_system.scr;source ${scriptaddr};
```

## Notes

Currently the Docker image support flash Android partitions only. For partition tables and bootloader,
you can simply copy all stuff in [recovery_installer](https://github.com/pierrchen/pat/tree/master/recovery-installer) into a USB disk and flash it directly using the files there.

```
usb reset
fatload usb 0:1 ${scriptaddr} flash_pt.scr;source ${scriptaddr};
fatload usb 0:1 ${scriptaddr} flash_bootloader.scr;source ${scriptaddr};
```
